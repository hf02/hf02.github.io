var Me=Object.defineProperty,Fe=Object.defineProperties;var Ve=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable;var ue=(i,e,t)=>e in i?Me(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,k=(i,e)=>{for(var t in e||(e={}))Be.call(e,t)&&ue(i,t,e[t]);if(he)for(var t of he(e))Je.call(e,t)&&ue(i,t,e[t]);return i},de=(i,e)=>Fe(i,Ve(e));import{I as He,O as fe,J as We,K as N,S as Ke,i as Ue,s as Ye,e as p,c as y,a as b,d as _,b as v,f as J,p as j,L as ge,t as T,g as R,M as f,h as H,N as me,P as W,Q as qe,m as _e,n as K,o as ve,j as U,l as Y,R as pe,T as q,U as Z,V as Ze}from"./vendor-23a4166d.js";function Xe(){function i(t,s=2){for(t=t.toString();t.length<s;)t=`0${t}`;return t}const e=new Date;return`${i(e.getHours())}:${i(e.getMinutes())}:${i(e.getSeconds())}.${i(e.getMilliseconds(),3)}`}class z extends He{}function Ge(i){return Object.getPrototypeOf(i).constructor}function ye(i){return i*.062}const M=9,be=!1,Qe=fe,ht=["i'm doing good, right?","development hell? more like hell yeah!","overcomplicated cuz i was bored",'"// @ts-expect-error" my beloved',"boo","i look fatter in text art","we're a svelte family","please keep things tidy","nice to meet you","i have my face yellow. hbu?","uh oh, why are you seeing me...","i worked hard on this.","three whole .jses!",typeof Date!="undefined"?new Date().getHours()<5?`it's ${new Date().getHours()}am, get some rest!`:"i heard sleeping is good for people like you.":"do you have the time?","i'm dabric"];var I;(function(i){i[i.None=0]="None",i[i.Error=1]="Error",i[i.Warn=2]="Warn",i[i.Info=3]="Info",i[i.Debug=4]="Debug"})(I||(I={}));var we;(function(i){i[i.LocalStorage=0]="LocalStorage",i[i.Server=1]="Server"})(we||(we={}));const xe=0;async function Oe(i){switch(xe){case 1:{const e=await fetch(`/storage/${i}`);if(e.status===404)return null;if(e.ok===!1)throw new Error(`non-ok error code: ${e.status}`);return JSON.parse(await e.text())}case 0:return JSON.parse(localStorage.getItem(i))}}async function ie(i,e){switch(xe){case 1:{const t=await fetch(`/storage/${i}`,{method:"PUT",body:JSON.stringify(e)});if(t.ok===!1)throw new Error(`non-ok error code: ${t.status}`);return}case 0:{localStorage.setItem(i,JSON.stringify(e));return}}}var ke;(function(i){i[i.None=0]="None",i[i.Error=1]="Error",i[i.Warn=2]="Warn",i[i.Info=3]="Info",i[i.Debug=4]="Debug"})(ke||(ke={}));var X;(function(i){i[i.None=0]="None",i[i.Normal=1]="Normal",i[i.Extreme=2]="Extreme"})(X||(X={}));var G;(function(i){i[i.None=0]="None",i[i.NonString=1]="NonString",i[i.All=2]="All"})(G||(G={}));var Ne;(function(i){i[i.No=0]="No",i[i.Collapsed=1]="Collapsed",i[i.Open=2]="Open"})(Ne||(Ne={}));var Se;(function(i){i[i.Line=0]="Line",i[i.Braille=1]="Braille",i[i.Number=2]="Number",i[i.Wiggle=3]="Wiggle",i[i.Run=4]="Run"})(Se||(Se={}));const se=new z;function re(i){return i(u),se.on("update",i),()=>se.removeListener("update",i)}const De={configBuild:M,timestamp:0,video:{noSelect:!0,fov:70,zoomFov:20,shadows:{enabled:!0,bias:-.001,normalBias:.2,reduceShadowUpdates:!1}},sound:{},input:{keys:{action1:"Mouse0",action2:"Mouse2",jump:"Space",moveBackwards:"KeyS",moveForwards:"KeyW",moveLeft:"KeyA",moveRight:"KeyD",pause:"Escape",use:"KeyE",debug:"F3",fullscreen:"F11",zoom:"KeyC",lookDown:"ArrowDown",lookLeft:"ArrowLeft",lookRight:"ArrowRight",lookUp:"ArrowUp",changePerspective:"F5"},camera:{mouseSensitivity:.001,keyboardSensitivity:2,touchSensitivity:5}},performance:{fixedTickerUndershoot:0,cache:1},debug:{failLoad:!1,failStart:!1,devSocket:{enabled:be,liveStorageReload:!0},logging:{level:1,double:0,interceptConsole:!1,hideLoadingLogs:!be},stats:{show:0,spinner:1}}},Le={8:i=>(i.cache=i==null?void 0:i.advanced.cache,delete i.advanced.cache,i),9:async i=>{await ie($e,i.configBackups),delete i.configBackups}},ne="settings",$e="settings-backup";let u=De;function et(){return We.defaultsDeep(u,De)}function oe(){u=et()}async function ut(){O("dbug","generating settings...");try{u=await Oe(ne),oe(),u.timestamp=Date.now();const i=u.configBuild;if(i<M){O("dbug",`settings config is behind! got ${i} while we're at ${M}.`);for(let e=i+1;e<=M;e++){const t=Le[e];typeof t=="function"&&(u=await t(u))}u.configBuild=M,O("dbug","updated settings for latest")}Ae(),O("dbug","finished generating settings.")}catch(i){throw O("warn","error generating settings!",i),O("warn","backing up config and generating a new one..."),u===null&&oe(),await ie(`settings-backup-${Date.now()}`,await Oe(ne)),tt(),new Error("Failed to generate settings! Your data has been backed up and then reset.")}}function Ae(){se.emit("update",u)}async function tt(){O("dbug","saving settings..."),u===null&&oe(),await ie(ne,u),Ae(),O("dbug","done saving settings")}const E={};for(const i in console)if(Object.prototype.hasOwnProperty.call(console,i)){const e=console[i];E[i]=e}let je=!1;function it(){if(je===!0)return;function i(e,t){console[e]=(...s)=>O(t,...s)}i("debug","dbug"),i("log","info"),i("info","info"),i("warn","warn"),i("error","err!"),je=!0}re(i=>{i.debug.logging.interceptConsole===!0&&it()});const st={dbug:{stringOutput:N.gray,type:N.gray,logger:E.debug,logLevel:I.Debug},info:{logger:E.log,logLevel:I.Info},warn:{type:N.yellow.inverse,stringOutput:N.yellow,logger:E.warn,logLevel:I.Warn},"err!":{type:N.red.inverse,stringOutput:N.red,logger:E.error,logLevel:I.Error}},Ie=new z;function O(i,...e){const t=k({time:N.gray,stack:N.gray,type:n=>n,stringOutput:n=>n,logger:E.log},st[i]);e=e.map(n=>typeof n=="string"?t.stringOutput(n):n);const s=`[${t.time(Xe())} ${t.type(i)}]`;if(Ie.emit("outputNotLeveled",[s,...e].join(" ")),u.debug.logging.level<t.logLevel)return;Ie.emit("output",[s,...e].join(" ")),t.logger(s,...e);const r=u.debug.logging.double;if(r===G.All)t.logger();else if(r===G.NonString){let n=!1;for(const o of e)if(typeof o!="string"){n=!0;break}n===!0&&t.logger("")}}const rt=globalThis;rt.ug13Watch={};class Ee{constructor(e,t=!1){this._dirty={},this._alreadyDirty=!0,this._caches=e,this._overkill=t}get dirty(){return Object.freeze(k({},this._dirty))}get caches(){return Object.freeze(k({},this._caches))}dirtyAll(){if(this._alreadyDirty===!1)for(const e in this._dirty)Object.prototype.hasOwnProperty.call(this._dirty,e)&&(this._dirty[e]=!0)}isOverkill(e){return u.performance.cache!==X.Extreme?typeof this._overkill=="boolean"?this._overkill:this._overkill[e]===!0:!1}getDirty(e){return[!0,void 0].includes(this._dirty[e])}setDirty(e,t){return this._dirty[e]=t,t===!1&&(this._alreadyDirty=!1),t}getValue(e){return this._caches[e]}setValue(e,t){return this._caches[e]=t,t}do(e,t){return this.getDirty(e)||u.performance.cache===X.None||this.isOverkill(e)?this.setValue(e,t()):this.getValue(e)}}function nt(i,e,t){const s=k({undershootMultiplier:0},t);let r=performance.now(),n=0;const o=()=>{let l=!0;const a=performance.now(),g=a-r;r=a,n+=g,i>0&&n+g*s.undershootMultiplier<i&&(l=!1),e(o,l?n:null),l===!0&&(n=0)};return o}var Ce;(function(i){i[i.RequestAnimationFrame=0]="RequestAnimationFrame",i[i.SetInterval=1]="SetInterval",i[i.Manual=2]="Manual"})(Ce||(Ce={}));class dt extends z{constructor(e){super();this._options={rate:0,method:1,maxDeltaTime:1/0,undershoot:0},this._active=!1,this._options=k(k({},this._options),e)}capDeltatime(e){return this._options.maxDeltaTime<e?this._options.maxDeltaTime:e}_emitTick(e){this.emit("tick",this.capDeltatime(e),e)}start(){if(!this.active){switch(this._active=!0,this._options.method){case 0:this._simpleTicker((e,t)=>{this._active===!0&&(requestAnimationFrame(e),t&&this._emitTick(t))})();break;case 1:{let e=performance.now();const t=setInterval(()=>{const s=performance.now(),r=s-e;e=s,this.active===!0?this._emitTick(r):clearInterval(t)},this._options.rate)}break;case 2:this.on("manualCallback",this._simpleTicker((e,t)=>{t&&this._emitTick(t)}));break}return this}}get active(){return this._active}manualCallback(){this.emit("manualCallback")}_simpleTicker(e,t){return nt(this._options.rate,e,de(k({},t),{undershootMultiplier:this._options.undershoot}))}stop(){return this._active=!1,this}}class Q extends z{constructor(e,t=null){super();this.vectorHelper=ae,this._axis=[],this._cache=new Ee({readonlyAxis:null,length:null}),this._initDim=null,this._initDim=t,this._axis=this.vectorHelper.arrayize(e,t)}get axis(){return this._cache.do("readonlyAxis",()=>[...this._axis])}get dimension(){return this._axis.length}set dimension(e){this.setDimension(e)}setDimension(e,t=0){if(this._initDim!==null)throw new Error("You can't change the dimension!");if(t===!0&&(t=this.dimension===1?this._axis[0]:0),e>this.dimension)for(let s=0;s<e;s++)this._axis[s]===void 0&&this._axis.push(t);else this._axis.length=e}clone(e=this._axis){return new(Ge(this))(e)}setAxis(e,t){return this._axis[e]=t,this._onAxisChange(e),this}getAxis(e){return this._axis[e]}get length(){return this._cache.do("length",()=>this.vectorHelper.distance(this.clone(0),this))}set length(e){this.setNormalized(),this.setMul(e)}normalized(){const e=this.clone(),t=this.length;return e.setDiv(t),e}setNormalized(){return this.clone(this.normalized())}_onAxisChange(e){this.emit("change",e),this._cache.dirtyAll()}set(e){return this._axis=this.vectorHelper.arrayize(e),this._onAxisChange(null),this}calc(e,t){return this.vectorHelper.calc(this,e,t)}add(e){return this.vectorHelper.add(this,e)}sub(e){return this.vectorHelper.sub(this,e)}mul(e){return this.vectorHelper.mul(this,e)}div(e){return this.vectorHelper.div(this,e)}setCalc(e,t){return this.set(this.vectorHelper.calc(this,e,t))}setAdd(e){return this.set(this.add(e))}setSub(e){return this.set(this.sub(e))}setMul(e){return this.set(this.mul(e))}setDiv(e){return this.set(this.div(e))}}class ae{static arrayize(e,t){if(typeof e=="number"){const s=[e];if(t)for(let r=0;r<t-1;r++)s.push(e);return s}else return Array.isArray(e)?e:e?[...e.axis]:this.arrayize(0,t)}static distance(e,t){let s=0;const r=e.clone(),n=t.clone();r.dimension!==n.dimension&&(n.dimension=r.dimension);for(let o=0;o<r.axis.length;o++){const l=r.axis[o],a=n.axis[o];s+=(l-a)**2}return Math.sqrt(s)}static calc(e,t,s){const r=new Q(e),n=new Q(t),o=new Q;n.dimension!==r.dimension&&n.setDimension(r.dimension,!0);for(let l=0;l<r.axis.length;l++){const a=r.axis[l],g=n.axis[l];o.setAxis(l,s(a,g))}return o}static add(e,t){return this.calc(e,t,(s,r)=>s+r)}static sub(e,t){return this.calc(e,t,(s,r)=>s-r)}static mul(e,t){return this.calc(e,t,(s,r)=>s*r)}static div(e,t){return this.calc(e,t,(s,r)=>s/r)}static axisNumberToString(e){switch(e){case 0:return"x";case 1:return"y";case 2:return"z";case 3:return"w";default:return e}}}class L extends Q{constructor(e){super(e,3)}get x(){return this.getAxis(0)}set x(e){this.setAxis(0,e)}get y(){return this.getAxis(1)}set y(e){this.setAxis(1,e)}get z(){return this.getAxis(2)}set z(e){this.setAxis(2,e)}}function Pe(i,e,t){const s=i.slice();return s[8]=e[t],s}function Te(i){let e,t,s,r=i[5]===!0&&Re(i);return{c(){e=p("div"),r&&r.c(),this.h()},l(n){e=y(n,"DIV",{class:!0});var o=b(e);r&&r.l(o),o.forEach(_),this.h()},h(){v(e,"class","cover svelte-jki9px")},m(n,o){J(n,e,o),r&&r.m(e,null),s=!0},p(n,o){i=n,i[5]===!0?r?(r.p(i,o),o&32&&j(r,1)):(r=Re(i),r.c(),j(r,1),r.m(e,null)):r&&(_e(),K(r,1,1,()=>{r=null}),ve())},i(n){s||(j(r),me(()=>{t||(t=W(e,Z,{duration:200,easing:q},!0)),t.run(1)}),s=!0)},o(n){K(r),t||(t=W(e,Z,{duration:200,easing:q},!1)),t.run(0),s=!1},d(n){n&&_(e),r&&r.d(),n&&t&&t.end()}}}function Re(i){let e,t,s,r=i[4],n=[];for(let o=0;o<r.length;o+=1)n[o]=ze(Pe(i,r,o));return{c(){e=p("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=y(o,"DIV",{class:!0});var l=b(e);for(let a=0;a<n.length;a+=1)n[a].l(l);l.forEach(_),this.h()},h(){v(e,"class","logs svelte-jki9px"),ge(e,"suggest",i[6]===!0)},m(o,l){J(o,e,l);for(let a=0;a<n.length;a+=1)n[a].m(e,null);s=!0},p(o,l){if(i=o,l&16){r=i[4];let a;for(a=0;a<r.length;a+=1){const g=Pe(i,r,a);n[a]?n[a].p(g,l):(n[a]=ze(g),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=r.length}l&64&&ge(e,"suggest",i[6]===!0)},i(o){s||(me(()=>{t||(t=W(e,Z,{duration:200,easing:q},!0)),t.run(1)}),s=!0)},o(o){t||(t=W(e,Z,{duration:200,easing:q},!1)),t.run(0),s=!1},d(o){o&&_(e),qe(n,o),o&&t&&t.end()}}}function ze(i){let e,t=i[8]+"",s;return{c(){e=p("div"),s=T(t),this.h()},l(r){e=y(r,"DIV",{class:!0});var n=b(e);s=R(n,t),n.forEach(_),this.h()},h(){v(e,"class","log svelte-jki9px")},m(r,n){J(r,e,n),f(e,s)},p(r,n){n&16&&t!==(t=r[8]+"")&&H(s,t)},d(r){r&&_(e)}}}function ot(i){let e,t,s,r,n,o,l,a,g,w,c,$,S,P=Math.floor(i[3]*100)+"",F,ee,V,x,h=i[0]===!0&&Te(i);return{c(){e=p("main"),h&&h.c(),t=U(),s=p("div"),r=p("div"),n=U(),o=p("div"),l=p("div"),a=T(i[2]),g=U(),w=p("div"),c=T(i[1]),$=U(),S=p("div"),F=T(P),ee=T("%"),this.h()},l(d){e=y(d,"MAIN",{class:!0});var m=b(e);h&&h.l(m),t=Y(m),s=y(m,"DIV",{class:!0});var A=b(s);r=y(A,"DIV",{class:!0,style:!0}),b(r).forEach(_),n=Y(A),o=y(A,"DIV",{class:!0});var B=b(o);l=y(B,"DIV",{class:!0});var le=b(l);a=R(le,i[2]),le.forEach(_),g=Y(B),w=y(B,"DIV",{class:!0});var ce=b(w);c=R(ce,i[1]),ce.forEach(_),B.forEach(_),$=Y(A),S=y(A,"DIV",{class:!0});var te=b(S);F=R(te,P),ee=R(te,"%"),te.forEach(_),A.forEach(_),m.forEach(_),this.h()},h(){v(r,"class","bar-filling svelte-jki9px"),pe(r,"width",i[3]*100+"%"),v(l,"class","text"),v(w,"class","info svelte-jki9px"),v(o,"class","description svelte-jki9px"),v(S,"class","percent svelte-jki9px"),v(s,"class",V="bar "+(i[0]?"visible":"hidden")+" "+(i[7]?"error":"")+" svelte-jki9px"),v(e,"class","svelte-jki9px")},m(d,m){J(d,e,m),h&&h.m(e,null),f(e,t),f(e,s),f(s,r),f(s,n),f(s,o),f(o,l),f(l,a),f(o,g),f(o,w),f(w,c),f(s,$),f(s,S),f(S,F),f(S,ee),x=!0},p(d,[m]){d[0]===!0?h?(h.p(d,m),m&1&&j(h,1)):(h=Te(d),h.c(),j(h,1),h.m(e,t)):h&&(_e(),K(h,1,1,()=>{h=null}),ve()),(!x||m&8)&&pe(r,"width",d[3]*100+"%"),(!x||m&4)&&H(a,d[2]),(!x||m&2)&&H(c,d[1]),(!x||m&8)&&P!==(P=Math.floor(d[3]*100)+"")&&H(F,P),(!x||m&129&&V!==(V="bar "+(d[0]?"visible":"hidden")+" "+(d[7]?"error":"")+" svelte-jki9px"))&&v(s,"class",V)},i(d){x||(j(h),x=!0)},o(d){K(h),x=!1},d(d){d&&_(e),h&&h.d()}}}function at(i,e,t){let{show:s=!0}=e,{info:r=""}=e,{title:n=""}=e,{percent:o=0}=e,{logs:l=[]}=e,{showLogs:a=!1}=e,{suggestLogs:g=!1}=e,{error:w=!1}=e;return i.$$set=c=>{"show"in c&&t(0,s=c.show),"info"in c&&t(1,r=c.info),"title"in c&&t(2,n=c.title),"percent"in c&&t(3,o=c.percent),"logs"in c&&t(4,l=c.logs),"showLogs"in c&&t(5,a=c.showLogs),"suggestLogs"in c&&t(6,g=c.suggestLogs),"error"in c&&t(7,w=c.error)},[s,r,n,o,l,a,g,w]}class ft extends Ke{constructor(e){super();Ue(this,e,at,ot,Ye,{show:0,info:1,title:2,percent:3,logs:4,showLogs:5,suggestLogs:6,error:7})}}class D{constructor(e){this._parent=null,this._events=new z,this.position=new L,this.rotation=new L,this.velocity=new L,this._name="",this._rotationOrder="XYZ",this._cache=new Ee({children:null}),this._children=[],(e!=null?e:!1)?this.setFromJSON(D.thingableToJson(e)):this._rendererObject=new fe,this.position.on("change",t=>{this._processVectorChange("position",t)}),this.rotation.on("change",t=>{this._processVectorChange("rotation",t)}),this._stopDoSettings=re(t=>{const s=this._rendererObject;s.shadow&&(s.shadow.normalBias=t.video.shadows.normalBias,s.shadow.bias=t.video.shadows.bias)})}get rotationOrder(){return this._rotationOrder}set rotationOrder(e){this._rotationOrder=e,this._rendererObject.rotation.order=e}toString(){return`[Thing ${this.name}]`}get parent(){return this._parent}set parent(e){this.changeParent(e)}get name(){return this._name}set name(e){this._name=e,this._rendererObject.name=e}_processVectorChange(e,t){if(t===null){const r=this[e].axis;for(let n=0;n<r.length;n++){const o=ae.axisNumberToString(n);this._rendererObject[e][o]=r[n]}}const s=ae.axisNumberToString(t);this._rendererObject[e][s]=this[e][s]}get children(){return this._cache.do("children",()=>[...this._children])}get rendererObject(){return this._rendererObject}add(e){return this._children.push(e),this._rendererObject.add(e._rendererObject),this._cache.setDirty("children",!0),e.changeParent(this,!1),e}forEveryChild(e,t=!1){for(const s of this._children)e(s),t===!0&&s.forEveryChild(e,!0)}changeParent(e,t=!0){var s;t===!0&&((s=this.parent)==null||s.remove(this),e==null||e.add(this)),this._parent=e}remove(e){for(let t=0;t<this._children.length;t++)if(this._children[t]===e){this._children.splice(t,1);break}return e.changeParent(null,!1),this}getChildFromName(e,t=!1){const s=[];s.push(...this._children);for(let r=0;r<s.length;r++){const n=s[r];if(n.name===e)return n;t&&s.push(...n._children)}return null}static rendererObjectToJSON(e){return{name:e.name,position:e.position.toArray(),rotation:e.rotation.toArray(),rotationOrder:e.rotation.order,velocity:[0,0,0],rendererObject:e.clone(!1).toJSON(),children:e.children.map(t=>this.rendererObjectToJSON(t))}}toJSON(){const e={position:this.position.axis,rotation:this.rotation.axis,velocity:this.velocity.axis,rotationOrder:this.rotationOrder,name:this.name,children:this.children.map(t=>t.toJSON()),rendererObject:this._rendererObject.clone(!1).toJSON()};return this._events.emit("toJSON",e),e}destroy(){var e,t;(t=(e=this._rendererObject).dispose)==null||t.call(e),this._stopDoSettings()}setFromJSON(e){if(!Array.isArray(e)){this._rendererObject=new Ze().parse(e.rendererObject),this.position.set(e.position),this.rotation.set(e.rotation),this.velocity.set(e.velocity),this.rotationOrder=e.rotationOrder,this.name=e.name;for(let t=0;t<this._children.length;t++){const s=this._children[t];this.remove(s)}for(let t=0;t<e.children.length;t++){const s=e.children[t];this.add(new D().setFromJSON(s))}}return this._events.emit("fromJSON",e),this}clone(){return new D(this)}static thingableToJson(e){return e instanceof D?e.toJSON():e instanceof Qe?D.rendererObjectToJSON(e):e}}class gt extends D{constructor(e,t,s,r,n){super(e);this.model=e,this.world=t,this.input=s,this.camera=r,this.game=n,this._perspective=C.FirstPerson,this.cameraRotation=new L,this.head=this.getChildFromName("head",!0),this.body=this.getChildFromName("body",!0),this.world.add(this),this.perspective=this._perspective,this._setupPlayerCamera(),this._subscribeToControls(),this.forEveryChild(o=>{o.rendererObject.castShadow!==void 0&&(o.rendererObject.castShadow=!0),o.rendererObject.receiveShadow!==void 0&&(o.rendererObject.receiveShadow=!0)},!0),re(o=>{this.camera.fov=o.video.fov,this.camera.updateProjectionMatrix()})}_setupPlayerCamera(){this.camera.parent.rotationOrder="YXZ",this.camera.rotationOrder="YXZ",this.rotationOrder="YXZ"}get perspective(){return this._perspective}set perspective(e){switch(e){case C.FirstPerson:this.camera.parent=this.head,this.camera.position.set([0,ye(3),ye(-3)]),this.camera.rotation.set([0,0,0]);break;case C.ThirdPersonBack:this.camera.parent=this.head,this.camera.position.set([0,0,5]),this.camera.rotation.set([0,0,0]);break;case C.ThirdPersonFront:this.camera.parent=this.head,this.camera.position.set([0,0,-5]),this.camera.rotation.set([0,Math.PI,0]);break}this._perspective=e}_subscribeToControls(){this.input.on("changePerspective",e=>{e===!0&&(this.perspective=(this.perspective+1)%3)}),this.input.on("zoom",e=>{e?this.camera.fov=u.video.zoomFov:this.camera.fov=u.video.fov,this.camera.updateProjectionMatrix()}),this.input.on("camera",e=>{const t=u.input.camera.mouseSensitivity,s=-e.movement.y*t,r=-e.movement.x*t;this.cameraRotation.x+=s,this.cameraRotation.y+=r,this.head.rotation.x=this.cameraRotation.x,this.head.rotation.y=this.cameraRotation.y;const n=this.head.rotation.y-this.body.rotation.y,o=Math.PI*.25;Math.abs(n)>=o&&(this.body.rotation.y+=r)}),this.game.on("frameTick",e=>{const t=.01,s=Math.sin(this.cameraRotation.y%(Math.PI*2)),r=Math.cos(this.cameraRotation.y%(Math.PI*2)),n=Math.sin((this.cameraRotation.y+Math.PI*.5)%(Math.PI*2)),o=Math.cos((this.cameraRotation.y+Math.PI*.5)%(Math.PI*2));this.input.getInput("moveForwards")&&(this.position.x-=s*t*e,this.position.z-=r*t*e),this.input.getInput("moveBackwards")&&(this.position.x+=s*t*e,this.position.z+=r*t*e),this.input.getInput("moveLeft")&&(this.position.x-=n*t*e,this.position.z-=o*t*e),this.input.getInput("moveRight")&&(this.position.x+=n*t*e,this.position.z+=o*t*e)})}}var C;(function(i){i[i.FirstPerson=0]="FirstPerson",i[i.ThirdPersonBack=1]="ThirdPersonBack",i[i.ThirdPersonFront=2]="ThirdPersonFront"})(C||(C={}));export{Ee as C,ft as L,gt as P,Se as S,z as T,Q as V,dt as a,Ce as b,u as c,re as d,D as e,ht as f,ut as g,Ne as h,Ie as i,O as l,tt as s,Ae as u};
