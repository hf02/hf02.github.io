var pe=Object.defineProperty,_e=Object.defineProperties;var we=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var X=(e,t,n)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,N=(e,t)=>{for(var n in t||(t={}))be.call(t,n)&&X(e,n,t[n]);if(Z)for(var n of Z(t))ye.call(t,n)&&X(e,n,t[n]);return e},$=(e,t)=>_e(e,we(t));import{I as ke,J as Ee,K as _,S as Ne,i as Ie,s as De,e as y,c as k,a as E,d as h,b as w,f as P,L as Se,M as L,j as R,t as W,l as V,g as F,N as ee,O as g,p as q,m as Te,n as te,o as Oe,h as U,P as ne,Q as ie}from"./vendor-10aeeba5.js";function Ae(){function e(n,r=2){for(n=n.toString();n.length<r;)n=`0${n}`;return n}const t=new Date;return`${e(t.getHours())}:${e(t.getMinutes())}:${e(t.getSeconds())}.${e(t.getMilliseconds(),3)}`}class re extends ke{}const T=9;var I;(function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Warn=2]="Warn",e[e.Info=3]="Info",e[e.Debug=4]="Debug"})(I||(I={}));var oe;(function(e){e[e.LocalStorage=0]="LocalStorage",e[e.Server=1]="Server"})(oe||(oe={}));const se=0;async function ae(e){switch(se){case 1:{const t=await fetch(`/storage/${e}`);if(t.status===404)return null;if(t.ok===!1)throw new Error(`non-ok error code: ${t.status}`);return JSON.parse(await t.text())}case 0:return JSON.parse(localStorage.getItem(e))}}async function x(e,t){switch(se){case 1:{const n=await fetch(`/storage/${e}`,{method:"PUT",body:JSON.stringify(t)});if(n.ok===!1)throw new Error(`non-ok error code: ${n.status}`);return}case 0:{localStorage.setItem(e,JSON.stringify(t));return}}}var le;(function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Warn=2]="Warn",e[e.Info=3]="Info",e[e.Debug=4]="Debug"})(le||(le={}));var ce;(function(e){e[e.None=0]="None",e[e.Normal=1]="Normal",e[e.Extreme=2]="Extreme"})(ce||(ce={}));var K;(function(e){e[e.None=0]="None",e[e.NonString=1]="NonString",e[e.All=2]="All"})(K||(K={}));var ue;(function(e){e[e.No=0]="No",e[e.Collapsed=1]="Collapsed",e[e.Open=2]="Open"})(ue||(ue={}));var fe;(function(e){e[e.Line=0]="Line",e[e.Braille=1]="Braille",e[e.Number=2]="Number",e[e.Wiggle=3]="Wiggle",e[e.Run=4]="Run"})(fe||(fe={}));const z=new re;function Be(e){return e(u),z.on("update",e),()=>z.removeListener("update",e)}const ge={configBuild:T,timestamp:0,video:{noSelect:!0},sound:{},input:{keys:{action1:"Mouse0",action2:"Mouse2",jump:"Space",moveBackwards:"KeyS",moveForwards:"KeyW",moveLeft:"KeyA",moveRight:"KeyD",pause:"Escape",use:"KeyE",debug:"F3",fullscreen:"F11",zoom:"KeyC",lookDown:"ArrowDown",lookLeft:"ArrowLeft",lookRight:"ArrowRight",lookUp:"ArrowUp"},camera:{mouseSensitivity:.001,keyboardSensitivity:2,touchSensitivity:5}},performance:{fixedTickerUndershoot:0,cache:1},debug:{logging:{level:1,double:0,interceptConsole:!1},stats:{show:0,spinner:1}}},Ce={8:e=>(e.cache=e==null?void 0:e.advanced.cache,delete e.advanced.cache,e),9:async e=>{await x(Re,e.configBackups),delete e.configBackups}},G="settings",Re="settings-backup";let u=ge;function We(){return Ee.defaultsDeep(u,ge)}function H(){u=We()}async function xe(){p("dbug","generating settings...");try{u=await ae(G),H(),u.timestamp=Date.now();const e=u.configBuild;if(e<T){p("dbug",`settings config is behind! got ${e} while we're at ${T}.`);for(let t=e+1;t<=T;t++){const n=Ce[t];typeof n=="function"&&(u=await n(u))}u.configBuild=T,p("dbug","updated settings for latest")}de(),p("dbug","finished generating settings.")}catch(e){throw p("warn","error generating settings!",e),p("warn","backing up config and generating a new one..."),u===null&&H(),await x(`settings-backup-${Date.now()}`,await ae(G)),Ve(),new Error("Failed to generate settings! Your data has been backed up and then reset.")}}function de(){z.emit("update",u)}async function Ve(){p("dbug","saving settings..."),u===null&&H(),await x(G,u),de(),p("dbug","done saving settings")}const D={};for(const e in console)if(Object.prototype.hasOwnProperty.call(console,e)){const t=console[e];D[e]=t}let he=!1;function Fe(){if(he===!0)return;function e(t,n){console[t]=(...r)=>p(n,...r)}e("debug","dbug"),e("log","info"),e("info","info"),e("warn","warn"),e("error","err!"),he=!0}Be(e=>{e.debug.logging.interceptConsole===!0&&Fe()});const Ke={dbug:{stringOutput:_.gray,type:_.gray,logger:D.debug,logLevel:I.Debug},info:{logger:D.log,logLevel:I.Info},warn:{type:_.yellow.inverse,stringOutput:_.yellow,logger:D.warn,logLevel:I.Warn},"err!":{type:_.red.inverse,stringOutput:_.red,logger:D.error,logLevel:I.Error}};function p(e,...t){const n=N({time:_.gray,stack:_.gray,type:i=>i,stringOutput:i=>i,logger:D.log},Ke[e]);if(u.debug.logging.level<n.logLevel)return;t=t.map(i=>typeof i=="string"?n.stringOutput(i):i),n.logger(`[${n.time(Ae())} ${n.type(e)}]`,...t);const r=u.debug.logging.double;if(r===K.All)n.logger();else if(r===K.NonString){let i=!1;for(const s of t)if(typeof s!="string"){i=!0;break}i===!0&&n.logger("")}}const Me=globalThis;Me.ug13Watch={};function je(e,t,n){const r=N({undershootMultiplier:0},n);let i=performance.now(),s=0;const f=()=>{let d=!0;const c=performance.now(),v=c-i;i=c,s+=v,e>0&&s+v*r.undershootMultiplier<e&&(d=!1),t(f,d?s:null),d===!0&&(s=0)};return f}var ve;(function(e){e[e.RequestAnimationFrame=0]="RequestAnimationFrame",e[e.SetInterval=1]="SetInterval",e[e.Manual=2]="Manual"})(ve||(ve={}));class ze extends re{constructor(t){super();this._options={rate:0,method:1,maxDeltaTime:1/0,undershoot:0},this._active=!1,this._options=N(N({},this._options),t)}capDeltatime(t){return this._options.maxDeltaTime<t?this._options.maxDeltaTime:t}_emitTick(t){this.emit("tick",this.capDeltatime(t),t)}start(){if(!this.active){switch(this._active=!0,this._options.method){case 0:this._simpleTicker((t,n)=>{this._active===!0&&(requestAnimationFrame(t),n&&this._emitTick(n))})();break;case 1:{let t=performance.now();const n=setInterval(()=>{const r=performance.now(),i=r-t;t=r,this.active===!0?this._emitTick(i):clearInterval(n)},this._options.rate)}break;case 2:this.on("manualCallback",this._simpleTicker((t,n)=>{n&&this._emitTick(n)}));break}return this}}get active(){return this._active}manualCallback(){this.emit("manualCallback")}_simpleTicker(t,n){return je(this._options.rate,t,$(N({},n),{undershootMultiplier:this._options.undershoot}))}stop(){return this._active=!1,this}}function me(e){let t,n,r;return{c(){t=y("div"),this.h()},l(i){t=k(i,"DIV",{class:!0}),E(t).forEach(h),this.h()},h(){w(t,"class","cover svelte-a8lpo5")},m(i,s){P(i,t,s),r=!0},p(i,s){},i(i){r||(Se(()=>{n||(n=L(t,ie,{duration:200,easing:ne},!0)),n.run(1)}),r=!0)},o(i){n||(n=L(t,ie,{duration:200,easing:ne},!1)),n.run(0),r=!1},d(i){i&&h(t),i&&n&&n.end()}}}function Je(e){let t,n,r,i,s,f,d,c,v,O,M,b,S=Math.floor(e[3]*100)+"",A,j,B,m,a=e[0]===!0&&me();return{c(){a&&a.c(),t=R(),n=y("div"),r=y("div"),i=R(),s=y("div"),f=y("div"),d=W(e[2]),c=R(),v=y("div"),O=W(e[1]),M=R(),b=y("div"),A=W(S),j=W("%"),this.h()},l(o){a&&a.l(o),t=V(o),n=k(o,"DIV",{class:!0});var l=E(n);r=k(l,"DIV",{class:!0,style:!0}),E(r).forEach(h),i=V(l),s=k(l,"DIV",{class:!0});var C=E(s);f=k(C,"DIV",{class:!0});var Q=E(f);d=F(Q,e[2]),Q.forEach(h),c=V(C),v=k(C,"DIV",{class:!0});var Y=E(v);O=F(Y,e[1]),Y.forEach(h),C.forEach(h),M=V(l),b=k(l,"DIV",{class:!0});var J=E(b);A=F(J,S),j=F(J,"%"),J.forEach(h),l.forEach(h),this.h()},h(){w(r,"class","bar-filling svelte-a8lpo5"),ee(r,"width",e[3]*100+"%"),w(f,"class","text"),w(v,"class","info svelte-a8lpo5"),w(s,"class","description svelte-a8lpo5"),w(b,"class","percent svelte-a8lpo5"),w(n,"class",B="bar "+(e[0]?"visible":"hidden")+" "+(e[4]?"error":"")+" svelte-a8lpo5")},m(o,l){a&&a.m(o,l),P(o,t,l),P(o,n,l),g(n,r),g(n,i),g(n,s),g(s,f),g(f,d),g(s,c),g(s,v),g(v,O),g(n,M),g(n,b),g(b,A),g(b,j),m=!0},p(o,[l]){o[0]===!0?a?(a.p(o,l),l&1&&q(a,1)):(a=me(),a.c(),q(a,1),a.m(t.parentNode,t)):a&&(Te(),te(a,1,1,()=>{a=null}),Oe()),(!m||l&8)&&ee(r,"width",o[3]*100+"%"),(!m||l&4)&&U(d,o[2]),(!m||l&2)&&U(O,o[1]),(!m||l&8)&&S!==(S=Math.floor(o[3]*100)+"")&&U(A,S),(!m||l&17&&B!==(B="bar "+(o[0]?"visible":"hidden")+" "+(o[4]?"error":"")+" svelte-a8lpo5"))&&w(n,"class",B)},i(o){m||(q(a),m=!0)},o(o){te(a),m=!1},d(o){a&&a.d(o),o&&h(t),o&&h(n)}}}function Pe(e,t,n){let{show:r=!0}=t,{info:i=""}=t,{title:s=""}=t,{percent:f=0}=t,{error:d=!1}=t;return e.$$set=c=>{"show"in c&&n(0,r=c.show),"info"in c&&n(1,i=c.info),"title"in c&&n(2,s=c.title),"percent"in c&&n(3,f=c.percent),"error"in c&&n(4,d=c.error)},[r,i,s,f,d]}class Ge extends Ne{constructor(t){super();Ie(this,t,Pe,Je,De,{show:0,info:1,title:2,percent:3,error:4})}}export{ce as C,Ge as L,fe as S,re as T,ze as a,ve as b,Ve as c,Be as d,ue as e,xe as g,p as l,u as s,de as u};
