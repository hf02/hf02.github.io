var Ae=Object.defineProperty,ke=Object.defineProperties;var De=Object.getOwnPropertyDescriptors;var ne=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable;var re=(e,t,s)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,x=(e,t)=>{for(var s in t||(t={}))Ee.call(t,s)&&re(e,s,t[s]);if(ne)for(var s of ne(t))Oe.call(t,s)&&re(e,s,t[s]);return e},ae=(e,t)=>ke(e,De(t));import{I as Ne,J as Ie,K as v,S as Se,i as Te,s as ze,e as A,c as k,a as D,d as _,b as w,f as q,L as Ce,M as oe,j as V,t as B,l as j,g as R,N as le,O as g,p as J,m as Ve,n as ce,o as Be,h as U,P as ue,Q as he}from"./vendor-10aeeba5.js";function je(){function e(s,n=2){for(s=s.toString();s.length<n;)s=`0${s}`;return s}const t=new Date;return`${e(t.getHours())}:${e(t.getMinutes())}:${e(t.getSeconds())}.${e(t.getMilliseconds(),3)}`}class G extends Ne{}const I=9;var E;(function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Warn=2]="Warn",e[e.Info=3]="Info",e[e.Debug=4]="Debug"})(E||(E={}));var de;(function(e){e[e.LocalStorage=0]="LocalStorage",e[e.Server=1]="Server"})(de||(de={}));const fe=0;async function ge(e){switch(fe){case 1:{const t=await fetch(`/storage/${e}`);if(t.status===404)return null;if(t.ok===!1)throw new Error(`non-ok error code: ${t.status}`);return JSON.parse(await t.text())}case 0:return JSON.parse(localStorage.getItem(e))}}async function H(e,t){switch(fe){case 1:{const s=await fetch(`/storage/${e}`,{method:"PUT",body:JSON.stringify(t)});if(s.ok===!1)throw new Error(`non-ok error code: ${s.status}`);return}case 0:{localStorage.setItem(e,JSON.stringify(t));return}}}var me;(function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Warn=2]="Warn",e[e.Info=3]="Info",e[e.Debug=4]="Debug"})(me||(me={}));var W;(function(e){e[e.None=0]="None",e[e.Normal=1]="Normal",e[e.Extreme=2]="Extreme"})(W||(W={}));var F;(function(e){e[e.None=0]="None",e[e.NonString=1]="NonString",e[e.All=2]="All"})(F||(F={}));var _e;(function(e){e[e.No=0]="No",e[e.Collapsed=1]="Collapsed",e[e.Open=2]="Open"})(_e||(_e={}));var pe;(function(e){e[e.Line=0]="Line",e[e.Braille=1]="Braille",e[e.Number=2]="Number",e[e.Wiggle=3]="Wiggle",e[e.Run=4]="Run"})(pe||(pe={}));const Q=new G;function Re(e){return e(d),Q.on("update",e),()=>Q.removeListener("update",e)}const xe={configBuild:I,timestamp:0,video:{noSelect:!0},sound:{},input:{keys:{action1:"Mouse0",action2:"Mouse2",jump:"Space",moveBackwards:"KeyS",moveForwards:"KeyW",moveLeft:"KeyA",moveRight:"KeyD",pause:"Escape",use:"KeyE",debug:"F3",fullscreen:"F11",zoom:"KeyC",lookDown:"ArrowDown",lookLeft:"ArrowLeft",lookRight:"ArrowRight",lookUp:"ArrowUp"},camera:{mouseSensitivity:.001,keyboardSensitivity:2}},performance:{fixedTickerUndershoot:0,cache:1},debug:{logging:{level:1,double:0,interceptConsole:!1},stats:{show:0,spinner:1}}},We={8:e=>(e.cache=e==null?void 0:e.advanced.cache,delete e.advanced.cache,e),9:async e=>{await H(Fe,e.configBackups),delete e.configBackups}},Y="settings",Fe="settings-backup";let d=xe;function Ke(){return Ie.defaultsDeep(d,xe)}function Z(){d=Ke()}async function tt(){y("dbug","generating settings...");try{d=await ge(Y),Z(),d.timestamp=Date.now();const e=d.configBuild;if(e<I){y("dbug",`settings config is behind! got ${e} while we're at ${I}.`);for(let t=e+1;t<=I;t++){const s=We[t];typeof s=="function"&&(d=await s(d))}d.configBuild=I,y("dbug","updated settings for latest")}ye(),y("dbug","finished generating settings.")}catch(e){throw y("warn","error generating settings!",e),y("warn","backing up config and generating a new one..."),d===null&&Z(),await H(`settings-backup-${Date.now()}`,await ge(Y)),Me(),new Error("Failed to generate settings! Your data has been backed up and then reset.")}}function ye(){Q.emit("update",d)}async function Me(){y("dbug","saving settings..."),d===null&&Z(),await H(Y,d),ye(),y("dbug","done saving settings")}const O={};for(const e in console)if(Object.prototype.hasOwnProperty.call(console,e)){const t=console[e];O[e]=t}let ve=!1;function Pe(){if(ve===!0)return;function e(t,s){console[t]=(...n)=>y(s,...n)}e("debug","dbug"),e("log","info"),e("info","info"),e("warn","warn"),e("error","err!"),ve=!0}Re(e=>{e.debug.logging.interceptConsole===!0&&Pe()});const qe={dbug:{stringOutput:v.gray,type:v.gray,logger:O.debug,logLevel:E.Debug},info:{logger:O.log,logLevel:E.Info},warn:{type:v.yellow.inverse,stringOutput:v.yellow,logger:O.warn,logLevel:E.Warn},"err!":{type:v.red.inverse,stringOutput:v.red,logger:O.error,logLevel:E.Error}};function y(e,...t){const s=x({time:v.gray,stack:v.gray,type:i=>i,stringOutput:i=>i,logger:O.log},qe[e]);if(d.debug.logging.level<s.logLevel)return;t=t.map(i=>typeof i=="string"?s.stringOutput(i):i),s.logger(`[${s.time(je())} ${s.type(e)}]`,...t);const n=d.debug.logging.double;if(n===F.All)s.logger();else if(n===F.NonString){let i=!1;for(const r of t)if(typeof r!="string"){i=!0;break}i===!0&&s.logger("")}}const Je=globalThis;Je.ug13Watch={};class Ue{constructor(t,s=!1){this._dirty={},this._alreadyDirty=!0,this._caches=t,this._overkill=s}get dirty(){return Object.freeze(x({},this._dirty))}get caches(){return Object.freeze(x({},this._caches))}dirtyAll(){if(this._alreadyDirty===!1)for(const t in this._dirty)Object.prototype.hasOwnProperty.call(this._dirty,t)&&(this._dirty[t]=!0)}isOverkill(t){return d.performance.cache!==W.Extreme?typeof this._overkill=="boolean"?this._overkill:this._overkill[t]===!0:!1}getDirty(t){return[!0,void 0].includes(this._dirty[t])}setDirty(t,s){return this._dirty[t]=s,s===!1&&(this._alreadyDirty=!1),s}getValue(t){return this._caches[t]}setValue(t,s){return this._caches[t]=s,s}do(t,s){return this.getDirty(t)||d.performance.cache===W.None||this.isOverkill(t)?this.setValue(t,s()):this.getValue(t)}}function Ge(e,t,s){const n=x({undershootMultiplier:0},s);let i=performance.now(),r=0;const l=()=>{let u=!0;const o=performance.now(),m=o-i;i=o,r+=m,e>0&&r+m*n.undershootMultiplier<e&&(u=!1),t(l,u?r:null),u===!0&&(r=0)};return l}var we;(function(e){e[e.RequestAnimationFrame=0]="RequestAnimationFrame",e[e.SetInterval=1]="SetInterval",e[e.Manual=2]="Manual"})(we||(we={}));class st extends G{constructor(t){super();this._options={rate:0,method:1,maxDeltaTime:1/0,undershoot:0},this._active=!1,this._options=x(x({},this._options),t)}capDeltatime(t){return this._options.maxDeltaTime<t?this._options.maxDeltaTime:t}_emitTick(t){this.emit("tick",this.capDeltatime(t),t)}start(){if(!this.active){switch(this._active=!0,this._options.method){case 0:this._simpleTicker((t,s)=>{this._active===!0&&(requestAnimationFrame(t),s&&this._emitTick(s))})();break;case 1:{let t=performance.now();const s=setInterval(()=>{const n=performance.now(),i=n-t;t=n,this.active===!0?this._emitTick(i):clearInterval(s)},this._options.rate)}break;case 2:this.on("manualCallback",this._simpleTicker((t,s)=>{s&&this._emitTick(s)}));break}return this}}get active(){return this._active}manualCallback(){this.emit("manualCallback")}_simpleTicker(t,s){return Ge(this._options.rate,t,ae(x({},s),{undershootMultiplier:this._options.undershoot}))}stop(){return this._active=!1,this}}class f extends G{constructor(t,s){super();this._axis=[],this._cache=new Ue({readonlyAxis:null,length:null}),this._extendOptions=x({class:f,defaultDim:1,defaultStrict:!1},s),this._axis=this._extendOptions.class.arrayize(t,this._extendOptions.defaultDim),this._dimension=this._axis.length}setAxis(t,s){if(!this.inStrictDimAxisIndex(t))throw new TypeError(`out of axis range of ${this.dimension}`);return this._axis[t]=s,this._onAxisChange(t),s}_onAxisChange(t){this.emit("change",t),this._cache.dirtyAll()}inStrictDimAxisIndex(t){return!(this._extendOptions.defaultStrict&&this._extendOptions.defaultDim<t)}getAxis(t){if(!this.inStrictDimAxisIndex(t))throw new TypeError("out of index");return this._axis[t]}get axis(){return this._cache.do("readonlyAxis",()=>Object.freeze([...this._axis]))}get dimension(){return this._axis.length}set dimension(t){this._axis.length=t,this._axis=this._axis.filter(s=>s!=null?s:0)}normalize(){const t=this.length;return this.div(t),this}clone(){return new this._extendOptions.class(this._axis)}get length(){return this._cache.do("length",()=>f.distance(new this._extendOptions.class(0),this))}set length(t){this.normalize(),this.mul(t)}static add(t,s){return f.calc(t,s,(n,i)=>n+i)}static sub(t,s){return f.calc(t,s,(n,i)=>n-i)}static mul(t,s){return f.calc(t,s,(n,i)=>n*i)}static div(t,s){return f.calc(t,s,(n,i)=>n/i)}add(t){return this.set(f.add(this,t)),this}sub(t){return this.set(f.sub(this,t)),this}mul(t){return this.set(f.mul(this,t)),this}div(t){return this.set(f.div(this,t)),this}set(t){const s=new this._extendOptions.class(t);if(!this.inStrictDimAxisIndex(s.dimension))throw new TypeError(`can't set a ${this._extendOptions.class.name} to a vector with a different dimension`);this._axis=[...s.axis],this._onAxisChange(null)}static calc(t,s,n){const i=new X(t).clone(),r=new X(s).clone(),l=new X;r.dimension!==i.dimension&&(r.dimension=i.dimension);for(let u=0;u<i.axis.length;u++){const o=i.axis[u],m=r.axis[u];l.setAxis(u,n(o,m))}return l}static arrayize(t,s){return typeof t=="number"?"".padEnd(s,"0").split("").map(n=>parseFloat(n)):Array.isArray(t)?t:t?[...t.axis]:this.arrayize(0,s)}static distance(t,s){let n=0;const i=t.clone(),r=s.clone();i.dimension!==r.dimension&&(r.dimension=i.dimension);for(let l=0;l<i.axis.length;l++){const u=i.axis[l],o=r.axis[l];n+=(u-o)**2}return Math.sqrt(n)}static axisNumberToString(t){switch(t){case 0:return"x";case 1:return"y";case 2:return"z";case 3:return"w"}}}class X extends f{}const $=class extends f{constructor(e){super(e,{class:$,defaultDim:1,defaultStrict:!0})}get x(){return this.getAxis(0)}set x(e){this.setAxis(0,e)}};let He=$;He.class=$;const L=class extends f{constructor(e){super(e,{class:L,defaultDim:2,defaultStrict:!0})}get x(){return this.getAxis(0)}set x(e){this.setAxis(0,e)}get y(){return this.getAxis(1)}set y(e){this.setAxis(1,e)}};let Qe=L;Qe.class=L;const ee=class extends f{constructor(e){super(e,{class:ee,defaultDim:3,defaultStrict:!0})}get x(){return this.getAxis(0)}set x(e){this.setAxis(0,e)}get y(){return this.getAxis(1)}set y(e){this.setAxis(1,e)}get z(){return this.getAxis(2)}set z(e){this.setAxis(2,e)}};let Ye=ee;Ye.class=ee;const te=class extends f{constructor(e){super(e,{class:te,defaultDim:4,defaultStrict:!0})}get x(){return this.getAxis(0)}set x(e){this.setAxis(0,e)}get y(){return this.getAxis(1)}set y(e){this.setAxis(1,e)}get z(){return this.getAxis(2)}set z(e){this.setAxis(2,e)}get w(){return this.getAxis(3)}set w(e){this.setAxis(3,e)}};let Ze=te;Ze.class=te;function be(e){let t,s,n;return{c(){t=A("div"),this.h()},l(i){t=k(i,"DIV",{class:!0}),D(t).forEach(_),this.h()},h(){w(t,"class","cover svelte-a8lpo5")},m(i,r){q(i,t,r),n=!0},p(i,r){},i(i){n||(Ce(()=>{s||(s=oe(t,he,{duration:200,easing:ue},!0)),s.run(1)}),n=!0)},o(i){s||(s=oe(t,he,{duration:200,easing:ue},!1)),s.run(0),n=!1},d(i){i&&_(t),i&&s&&s.end()}}}function Xe(e){let t,s,n,i,r,l,u,o,m,S,K,b,N=Math.floor(e[3]*100)+"",T,M,z,p,c=e[0]===!0&&be();return{c(){c&&c.c(),t=V(),s=A("div"),n=A("div"),i=V(),r=A("div"),l=A("div"),u=B(e[2]),o=V(),m=A("div"),S=B(e[1]),K=V(),b=A("div"),T=B(N),M=B("%"),this.h()},l(a){c&&c.l(a),t=j(a),s=k(a,"DIV",{class:!0});var h=D(s);n=k(h,"DIV",{class:!0,style:!0}),D(n).forEach(_),i=j(h),r=k(h,"DIV",{class:!0});var C=D(r);l=k(C,"DIV",{class:!0});var se=D(l);u=R(se,e[2]),se.forEach(_),o=j(C),m=k(C,"DIV",{class:!0});var ie=D(m);S=R(ie,e[1]),ie.forEach(_),C.forEach(_),K=j(h),b=k(h,"DIV",{class:!0});var P=D(b);T=R(P,N),M=R(P,"%"),P.forEach(_),h.forEach(_),this.h()},h(){w(n,"class","bar-filling svelte-a8lpo5"),le(n,"width",e[3]*100+"%"),w(l,"class","text"),w(m,"class","info svelte-a8lpo5"),w(r,"class","description svelte-a8lpo5"),w(b,"class","percent svelte-a8lpo5"),w(s,"class",z="bar "+(e[0]?"visible":"hidden")+" "+(e[4]?"error":"")+" svelte-a8lpo5")},m(a,h){c&&c.m(a,h),q(a,t,h),q(a,s,h),g(s,n),g(s,i),g(s,r),g(r,l),g(l,u),g(r,o),g(r,m),g(m,S),g(s,K),g(s,b),g(b,T),g(b,M),p=!0},p(a,[h]){a[0]===!0?c?(c.p(a,h),h&1&&J(c,1)):(c=be(),c.c(),J(c,1),c.m(t.parentNode,t)):c&&(Ve(),ce(c,1,1,()=>{c=null}),Be()),(!p||h&8)&&le(n,"width",a[3]*100+"%"),(!p||h&4)&&U(u,a[2]),(!p||h&2)&&U(S,a[1]),(!p||h&8)&&N!==(N=Math.floor(a[3]*100)+"")&&U(T,N),(!p||h&17&&z!==(z="bar "+(a[0]?"visible":"hidden")+" "+(a[4]?"error":"")+" svelte-a8lpo5"))&&w(s,"class",z)},i(a){p||(J(c),p=!0)},o(a){ce(c),p=!1},d(a){c&&c.d(a),a&&_(t),a&&_(s)}}}function $e(e,t,s){let{show:n=!0}=t,{info:i=""}=t,{title:r=""}=t,{percent:l=0}=t,{error:u=!1}=t;return e.$$set=o=>{"show"in o&&s(0,n=o.show),"info"in o&&s(1,i=o.info),"title"in o&&s(2,r=o.title),"percent"in o&&s(3,l=o.percent),"error"in o&&s(4,u=o.error)},[n,i,r,l,u]}class it extends Se{constructor(t){super();Te(this,t,$e,Xe,ze,{show:0,info:1,title:2,percent:3,error:4})}}export{f as A,Ue as C,it as L,pe as S,G as T,Ye as V,st as a,we as b,d as c,Re as d,Qe as e,_e as f,tt as g,y as l,Me as s,ye as u};
